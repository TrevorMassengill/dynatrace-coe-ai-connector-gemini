{
  "$schema": "https://developer.dynatrace.com/docs-assets/schema_strict_apps.json",
  "dynatrace": "1",
  "schemaId": "gemini-connection",
  "version": "0.0.5",
  "summaryPattern": "{name}",
  "displayName": "Google Gemini Connections",
  "description": "Connections to reach out to Gemini",
  "multiObject": true,
  "maxObjects": 100,
  "ordered": false,
  "properties": {
    "name": {
      "displayName": "Connection name",
      "description": "The name of the connection",
      "type": "text",
      "nullable": false,
      "forceSecretResubmission": false,
      "constraints": [
        {
          "type": "LENGTH",
          "customMessage": "Name has to be between 1 and 50 characters long",
          "maxLength": 50,
          "minLength": 1
        }
      ],
      "default": ""
    },
    "model": {
      "displayName": "Model ID",
      "description": "Model to query. See https://docs.cloud.google.com/vertex-ai/generative-ai/docs/models. Ex: Gemini 2.5 Pro = gemini-2.5-pro",
      "type": "text",
      "nullable": false,
      "forceSecretResubmission": false,
      "constraints": [],
      "default": "gemini-2.5-flash"
    },
    "token": {
      "displayName": "API Key",
      "description": "API key",
      "type": "secret",
      "nullable": false,
      "constraints": [
        {
          "type": "LENGTH",
          "customMessage": "Token has to be between 5 and 500 characters long",
          "maxLength": 500,
          "minLength": 5
        }
      ],
      "default": ""
    },
    "url": {
      "displayName": "URL",
      "description": "Normally: https://generativelanguage.googleapis.com/v1beta/models",
      "type": "text",
      "subType": "url",
      "nullable": false,
      "default": "https://generativelanguage.googleapis.com/v1beta/models",
      "constraints": [
        {
          "type": "PATTERN",
          "customMessage": "The URL must be secure (https://) and must not contain a trailing slash.",
          "pattern": "^https://.*[^/]$"
        }
      ],
      "forceSecretResubmission": true
    }
  },
  "constraints": [
    {
      "type": "SECRET_RESUBMISSION",
      "customMessage": "For security reasons please re-enter token/password to save the new configuration.",
      "checkAllProperties": false
    }
  ],
  "schemaConstraints": [
    {
      "type": "UNIQUE",
      "customMessage": "A connection with the same name already exists. Please provide a different name.",
      "uniqueProperties": [
        "name"
      ]
    }
  ]
}